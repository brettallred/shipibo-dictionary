<% content_for(:title) { "Shipibo Dictionary â€” Browse" } %>

<!-- Hero / Search -->
<div class="mb-12">
  <h1 class="font-display text-5xl text-ink mb-2 tracking-tight font-light">Find a word</h1>
  <p class="text-ink-muted text-lg font-light mb-8">
    A bilingual dictionary of the Shipibo language from the Peruvian Amazon
  </p>

  <div data-controller="search">
    <%= form_with url: search_path, method: :get, class: "relative", data: { search_target: "form", action: "input->search#search submit->search#submitForm" } do |f| %>
      <svg class="absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-ink-muted pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
      </svg>
      <%= f.search_field :q,
          placeholder: "Search Shipibo, Spanish, or English\u2026",
          class: "search-input",
          autocomplete: "off",
          data: { search_target: "input" } %>
    <% end %>

    <div data-search-target="results" class="hidden mt-6">
    </div>
  </div>
</div>

<!-- Alphabet Navigation -->
<% if @letters.any? %>
  <div class="flex flex-wrap gap-1 mb-6">
    <%= link_to "All", root_path, class: "alpha-link #{'active' unless @letter}" %>
    <% @letters.each do |letter| %>
      <%= link_to letter.upcase, root_path(letter: letter), class: "alpha-link #{'active' if @letter == letter}" %>
    <% end %>
  </div>
<% end %>

<!-- Entry Count -->
<p class="text-sm text-ink-muted mb-4 font-light">
  <%= @entries.count %> <%= @entries.count == 1 ? "entry" : "entries" %><%= " starting with \"#{@letter.upcase}\"" if @letter %>
</p>

<!-- Entries List -->
<div class="entries-container">
  <% @entries.each do |entry| %>
    <%= link_to entry_path(entry), class: "entry-card" do %>
      <div class="flex items-baseline gap-2.5">
        <span class="font-display text-xl text-ink"><%= entry.headword %></span>
        <% if entry.part_of_speech.present? %>
          <span class="badge"><%= entry.part_of_speech %></span>
        <% end %>
      </div>
      <% if entry.definitions_english.present? %>
        <p class="text-ink-light text-sm mt-1 leading-relaxed"><%= entry.definitions_english.first(3).join(" ; ") %></p>
      <% elsif entry.definitions_spanish.present? %>
        <p class="text-ink-muted text-sm mt-1 italic leading-relaxed"><%= entry.definitions_spanish.first(2).join(" ; ") %></p>
      <% end %>
    <% end %>
  <% end %>

  <% if @entries.empty? %>
    <div class="py-12 text-center text-ink-muted">
      <p>No entries found.</p>
    </div>
  <% end %>
</div>
