<% content_for(:title) { "#{@entry.headword} â€” Shipibo Dictionary" } %>

<!-- Back link -->
<div class="mb-8">
  <%= link_to root_path, class: "back-link" do %>
    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
    </svg>
    Back to dictionary
  <% end %>
</div>

<!-- Entry Header -->
<div class="mb-8 pb-6 border-b border-earth-200">
  <div class="flex items-baseline gap-3 mb-2">
    <h1 class="font-display text-5xl text-ink tracking-tight font-light"><%= @entry.headword %></h1>
    <% if @entry.part_of_speech.present? %>
      <span class="badge text-sm"><%= @entry.part_of_speech %></span>
    <% end %>
  </div>

  <% if @entry.variant_forms.present? %>
    <p class="text-ink-muted mt-2">
      <span class="text-sm font-semibold uppercase tracking-wide">Also</span>
      <span class="ml-1.5 font-display text-lg italic"><%= @entry.variant_forms.join(", ") %></span>
    </p>
  <% end %>

  <% if @entry.etymology.present? %>
    <p class="text-ink-muted text-sm italic mt-2 leading-relaxed"><%= @entry.etymology %></p>
  <% end %>

  <% if @entry.scientific_name.present? %>
    <p class="text-ink-muted text-sm italic mt-1"><%= @entry.scientific_name %></p>
  <% end %>
</div>

<!-- Definitions -->
<div class="space-y-8 mb-8">
  <% if @entry.definitions_english.present? %>
    <div>
      <h2 class="section-label">English</h2>
      <ol class="space-y-1.5">
        <% @entry.definitions_english.each_with_index do |defn, i| %>
          <li class="flex gap-3 text-ink leading-relaxed">
            <% if @entry.definitions_english.length > 1 %>
              <span class="font-mono text-sm text-ink-muted mt-0.5 select-none"><%= i + 1 %></span>
            <% end %>
            <span><%= defn %></span>
          </li>
        <% end %>
      </ol>
    </div>
  <% end %>

  <% if @entry.definitions_spanish.present? %>
    <div>
      <h2 class="section-label">Spanish</h2>
      <ol class="space-y-1.5">
        <% @entry.definitions_spanish.each_with_index do |defn, i| %>
          <li class="flex gap-3 text-ink-light leading-relaxed">
            <% if @entry.definitions_spanish.length > 1 %>
              <span class="font-mono text-sm text-ink-muted mt-0.5 select-none"><%= i + 1 %></span>
            <% end %>
            <span><%= defn %></span>
          </li>
        <% end %>
      </ol>
    </div>
  <% end %>
</div>

<!-- Examples -->
<% if @entry.examples.present? %>
  <div class="mb-8">
    <h2 class="section-label">Examples</h2>
    <div class="space-y-3">
      <% @entry.examples.each do |ex| %>
        <div class="example-block">
          <p class="text-ink font-semibold text-sm leading-relaxed"><%= ex["shipibo"] %></p>
          <% if ex["english"].present? %>
            <p class="text-ink-light text-sm mt-1 leading-relaxed"><%= ex["english"] %></p>
          <% end %>
          <% if ex["spanish"].present? %>
            <p class="text-ink-muted text-sm mt-1 italic leading-relaxed"><%= ex["spanish"] %></p>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>

<!-- Usage Notes -->
<% if @entry.grammatical_notes.present? %>
  <div class="mb-8">
    <h2 class="section-label">Usage</h2>
    <p class="text-ink-light leading-relaxed"><%= @entry.grammatical_notes %></p>
  </div>
<% end %>

<!-- Synonyms & Cross References -->
<% if @entry.synonyms.present? || @entry.cross_references.present? %>
  <div class="pt-6 border-t border-earth-200 space-y-4">
    <% if @entry.synonyms.present? %>
      <div>
        <h2 class="section-label">Synonyms</h2>
        <div class="flex flex-wrap gap-2">
          <% @entry.synonyms.each do |syn| %>
            <% related_entry = @related.find { |e| e.headword == syn } %>
            <% if related_entry %>
              <%= link_to syn, entry_path(related_entry), class: "accent-link text-lg" %>
            <% else %>
              <span class="font-display text-lg text-ink-muted"><%= syn %></span>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @entry.cross_references.present? %>
      <div>
        <h2 class="section-label">See also</h2>
        <div class="flex flex-wrap gap-2">
          <% @entry.cross_references.each do |ref| %>
            <% related_entry = @related.find { |e| e.headword == ref } %>
            <% if related_entry %>
              <%= link_to ref, entry_path(related_entry), class: "accent-link text-lg" %>
            <% else %>
              <span class="font-display text-lg text-ink-muted"><%= ref %></span>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>

<!-- Page reference -->
<% if @entry.page_number.present? %>
  <div class="mt-10 pt-4 border-t border-earth-200">
    <p class="text-xs text-ink-muted font-light">Source: page <%= @entry.page_number %></p>
  </div>
<% end %>
